<!DOCTYPE html>
<html>
{% extends "base.html" %}

<head>
{% block head_content %}
    <title>Pupil Timetables</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'stylesheets/pupil_teacher_navigators.css' %}">
{% endblock %}
</head>

<body>
{% block main_content %}

<h2>Pupil timetables</h2>

<p>Expand the year groups below to locate the relevant pupil</p>
{% for year_group, pupils_in_year in all_pupils.items %}
<button class="collapsible">Year {{year_group}} pupils</button>
<div class="content">
  <table>
      <tr>
          <th>Firstname</th>
          <th>Surname</th>
          <th>View timetable</th>
      </tr>
      {% for pupil in pupils_in_year %}
      <tr>
          <td>{{pupil.firstname}}</td>
          <td>{{pupil.surname}}</td>
          <td><a href="{% url 'pupil_timetable_view' pupil.id %}">View</a></td>
      </tr>
      {% endfor %}
  </table>
</div>
{% endfor %}

<script>
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    }
  });
}
</script>

{% endblock %}
</body>
</html>