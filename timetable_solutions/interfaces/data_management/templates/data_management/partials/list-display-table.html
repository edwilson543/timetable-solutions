<!--
A table showing a list of objects with appropriate headers
------------------
Context variables:
------------------
search_term: str | None  Must be explicitly passed to include
object_list: list[dict[str, str]]
human_field_names: list[str]
model_class: type[django_models.Model]
-->
<style>
.fixed-width-column {
    {% with human_field_names|length as n_columns %}
        width: calc(100% / {{ n_columns }});
    {% endwith %}
}
</style>


<div class="row mx-3">
    <div class="card shadow p-2 mb-3">

      <div class="card-content">

<!--        Explanatory text-->
        <div class="card-text">
            {% if search_term and paginator.count > 0 %}
                <p>
                    <b>
                        Found {{ paginator.count }}
                        {% if paginator.count > 1 %}
                            {{ model_class.Constant.human_string_plural }}
                        {% else %}
                            {{ model_class.Constant.human_string_singular }}
                        {% endif %}
                        for search: "{{ search_term }}"
                    </b>
                </p>
            {% elif search_term %}
                <p>
                    <b>Search for "{{ search_term }}" did not give any results!</b>
                </p>
            {% else %}
                <p>
                    <b>Showing all {{ model_class.Constant.human_string_plural }}</b>
                </p>
            {% endif %}
        </div>

<!--        Main display table-->
        <table class="table table-striped table-hover w-100">
            <thead>
                <tr>
                    {% for field_name in human_field_names %}
                        <th class="fixed-width-column">{{ field_name }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for object_field_values in page_obj.object_list %}
                    <tr>
                        {% for field_value in object_field_values %}
                            <td>{{ field_value }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>

<!--        Pagination-->
        {% if paginator.count > 0 %}
            <div>
                <span>
                    {% if page_obj.has_previous %}
                        <a href="?page=1" class="btn btn-secondary p-1">
                            &laquo; first
                        </a>
                        <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-secondary p-1">
                            previous
                        </a>
                    {% endif %}
                    <span>
                        <b>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</b>
                    </span>
                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}" class="btn btn-secondary p-1">
                            next
                        </a>
                        <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-secondary p-1">
                            last &raquo;
                        </a>
                    {% endif %}
                </span>
              </div>
        {% endif %}

      </div>
    </div>
</div>
