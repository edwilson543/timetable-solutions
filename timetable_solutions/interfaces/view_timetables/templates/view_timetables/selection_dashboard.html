<!DOCTYPE html>
<html>

{% extends "legacy-base.html" %}
{% load static %}
{% load python_ops %}

<head>

{% block head_content %}
<title> View timetables </title>
<link rel="stylesheet" href="{% static 'stylesheets/app_dashboard_base.css' %}">
{% endblock %}

<style>
{% block style_block %}
/* No timetable solutions styling */
#no_solutions_error {
    font-size: 20px;
}
.no_solutions_link {
    font-size: 20px;
    color: #690007;
}
.no_solutions_link:link {
    text-decoration: underline;
}

/* Information panel styling */
#summary_info {
    grid-row: 2 / 4;
    grid-column: 1;
}
#pupil_info {
    grid-row: 2;
    grid-column: 2;
}
#teacher_info {
    grid-row: 3;
    grid-column: 2;
}
.pup_teach_info {
    height: auto;
}

/* Button styling */
.view_link_button {
    /* Display */
    width: 90%;
    padding: 5px;

    /* Typography */
    font-size: 20px;
    text-align: center;
    color: white;

    /* Background and border */
    background-color: var(--green_button);
    border-radius: 5px;
    border: 1px solid var(--green_button_border);
}
.view_link_button:hover {
    background-color: var(--green_button_border);
}

.email_link_button {
    /* Display */
    width: 90%;
    padding: 5px;

    /* Typography */
    font-size: 20px;
    text-align: center;
    color: white;

    /* Background and border */
    background-color: var(--red_button);
    border-radius: 5px;
    border: 1px solid var(--red_button_border);
}
.email_link_button:hover {
    background-color: var(--red_button_border);
}

/* Text content of information panels styling */
ul {padding: 10px;}
li {
    font-size: 20px;
    padding: 10px;
    margin-left: 5px;
}

/* Horizontal breaks within information panels */
.horizontal_break {
    width:80%;
    color: black;
    margin-top: 10px;
    margin-bottom: 10px;
}

/* Daily lessons table */
#daily-lessons-table {
    width: 95%;
    border-collapse: collapse;
}
.row:hover {
    background-color: var(--dark_grey_background);
    color: white;
}
.cell {
    width: 25%;
    padding: 2px;
    text-align: center;
}
.header-cell {
    border-bottom: 1px solid black;
}
.central-column-cell {
    border-left: 1px solid black;
    border-right: 1px solid black;
}

{% endblock %}
</style>
</head>

<body>
{% block content %}
<div id="content_container">
    <div id="grid_container">
        {% if not has_solutions %}
        <div id="dashboard_title">
            <h4>No timetables are available yet</h4>
        </div>
        <div id="summary_info" class="info_frame">

            <div id="no_solutions_error" class="static_error_message">
                First
                <a href="" class="no_solutions_link"><b>upload your data</b></a>
                in the correct structure,
                and then visit the
                <a href="{% url 'create_timetables' %}" class="no_solutions_link"><b>create page</b></a>
                to specify your requirements.
            </div>
        </div>
        {% else %}
        <div id="dashboard_title">
            <h4>View your timetable solutions</h4>
        </div>
        <div id="summary_info" class="info_frame">
            <ul>
                <li>
                    Timetable solutions for {{ n_solved_lessons }} classes
                    ({{ n_solved_slots}} individual slots) have been found!
                </li>
                <li>
                    Here is how the timetables look across the week:
                </li>
            </ul>

            <table id="daily-lessons-table">
                <tr>
                    <th class="cell header-cell">
                        Day
                    </th>
                    <th class="cell header-cell central-column-cell">
                        Solver lessons
                    </th>
                    <th class="cell header-cell central-column-cell">
                        User lessons
                    </th>
                    <th class="cell header-cell">
                        <b>Total</b>
                    </th>
                </tr>
                {% for day in daily_solver_lessons.keys %}
                    <tr class="row">
                        <td class="cell">
                            {{ day }}
                        </td>
                        <td class="cell central-column-cell">
                            {% get_item mapping=daily_solver_lessons key=day as day_solver_lessons %}
                            {{ day_solver_lessons }}
                        </td>
                        <td class="cell central-column-cell">
                            {% get_item mapping=daily_user_lessons key=day as day_user_lessons %}
                            {{ day_user_lessons }}
                        </td>
                        <td class="cell">
                            <b>{% add day_solver_lessons day_user_lessons %}</b>
                        </td>
                    </tr>
                {% endfor %}
            </table>

        </div>

        <div id ="pupil_info" class="pup_teach_info info_frame">
            <ul>
                <li>Timetables have been created for all {{ n_pupils }} of your pupils!</li>
            </ul>
            <a href="{% url 'pupils_navigator' %}" class="view_link_button white_link">
                View pupil timetables
            </a>
            <hr class="horizontal_break">
            <a href="" class="email_link_button white_link">
                Email timetables to pupils
            </a>
        </div>

        <div id="teacher_info" class="pup_teach_info info_frame">
            <ul>
                <li>Timetables have been generated for all {{ n_teachers }} of your teachers!</li>
            </ul>
            <a href="{% url 'teachers_navigator' %}" class="view_link_button white_link">
                View teacher timetables
            </a>
            <hr class="horizontal_break">
            <a href="" class="email_link_button white_link">
                Email timetables to teachers
            </a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

</body>
</html>
