<!DOCTYPE html>
<html>

{% extends "base.html" %}
{% load static %}

<head>

{% block head_content %}
<title> View timetables </title>
<link rel="stylesheet" href="{% static 'stylesheets/app_dashboard_base.css' %}">
{% endblock %}

<style>
{% block style_block %}
/* No timetable solutions styling */
#no_solutions_error {
    font-size: 20px;
}
.no_solutions_link {
    font-size: 20px;
    color: #690007;
}
.no_solutions_link:link {
    text-decoration: underline;
}

/* Information panel styling */
#summary_info {
    grid-row: 2 / 4;
    grid-column: 1;
}
#pupil_info {
    grid-row: 2;
    grid-column: 2;
}
#teacher_info {
    grid-row: 3;
    grid-column: 2;
}
.pup_teach_info {
    height: auto;
}

/* Button styling */
.view_link_button {
    /* Display */
    width: 90%;
    padding: 5px;

    /* Typography */
    font-size: 20px;
    text-align: center;
    color: white;

    /* Background and border */
    background-color: var(--green_button);
    border-radius: 5px;
    border: 1px solid var(--green_button_border);
}
.view_link_button:hover {
    background-color: var(--green_button_border);
}

.email_link_button {
    /* Display */
    width: 90%;
    padding: 5px;

    /* Typography */
    font-size: 20px;
    text-align: center;
    color: white;

    /* Background and border */
    background-color: var(--red_button);
    border-radius: 5px;
    border: 1px solid var(--red_button_border);
}
.email_link_button:hover {
    background-color: var(--red_button_border);
}

/* Text content of information panels styling */
ul {padding: 10px;}
li {
    font-size: 20px;
    padding: 10px;
    margin-left: 5px;
}

/* Horizontal breaks within information panels */
.horizontal_break {
    width:80%;
    color: black;
    margin-top: 10px;
    margin-bottom: 10px;
}

{% endblock %}
</style>
</head>

<body>
{% block content %}
<div id="content_container">
    <div id="grid_container">
        {% if not has_solutions %}
        <div id="dashboard_title">
            <h4>No timetables are available yet</h4>
        </div>
        <div id="summary_info" class="info_frame">

            <div id="no_solutions_error" class="static_error_message">
                First
                <a href="{% url 'file_upload_page' %}" class="no_solutions_link"><b>upload your data</b></a>
                in the correct structure,
                and then visit the
                <a href="{% url 'create_timetables' %}" class="no_solutions_link"><b>create page</b></a>
                to specify your requirements.
            </div>
        </div>
        {% else %}
        <div id="dashboard_title">
            <h4>View your timetable solutions</h4>
        </div>
        <div id="summary_info" class="info_frame">
            <ul>
                <li>Timetable solutions for a total of {{total_classes}} classes have been found -
                {{total_lessons}} lessons will be taught each week</li>
                {% if busiest_days == quietest_days %}
                    <li>Every day of the week has {{ busiest_days_pct | floatformat:1 }} % of lessons in it</li>
                {% else %}
                    {% with bd_length=busiest_days|length %}
                        {% if bd_length == 1 %}
                            <li>
                                The busiest day of the week is {{ busiest_days | first }},
                                which has {{ busiest_days_pct | floatformat:1 }}% of lessons
                            </li>
                        {% else %}
                            <li>
                                The busiest days of the week are
                                {% for day in busiest_days %}
                                    {% if forloop.last %}
                                        and {{ day }},
                                    {% else %}
                                        {{ day }},
                                    {% endif %}
                                {% endfor %}
                                which each have {{ busiest_days_pct | floatformat:1 }}% of lessons
                            </li>
                        {% endif %}
                    {% endwith %}

                    {% with qd_length=quietest_days|length %}
                        {% if qd_length == 1 %}
                            <li>
                                The quietest day of the week is {{ quietest_days | first}},
                                with only {{ quietest_days_pct | floatformat:1 }}% of lessons
                            </li>
                        {% else %}
                            <li>
                                The quietest days of the week are
                                {% for day in quietest_days %}
                                    {% if forloop.last %}
                                        and {{ day }},
                                    {% else %}
                                        {{ day }},
                                    {% endif %}
                                {% endfor %}
                                which each have {{ quietest_days_pct | floatformat:1 }}% of lessons
                            </li>
                        {% endif %}
                    {% endwith %}
                {% endif %}

                {% with bt_length=busiest_times|length %}
                    {% if bt_length == 1 %}
                        <li>
                            The busiest time on average is {{ busiest_times | first }},
                            which has {{ busiest_times_pct | floatformat:1 }}% of lessons
                        </li>
                    {% else %}
                        <li>
                            The times of the day are
                            {% for time in busiest_times %}
                                {% if forloop.last %}
                                    and {{ time }},
                                {% else %}
                                    {{ time }},
                                {% endif %}
                            {% endfor %}
                            which each have {{ busiest_times_pct | floatformat:1 }}% of lessons
                        </li>
                    {% endif %}
                {% endwith %}
            </ul>

        </div>

        <div id ="pupil_info" class="pup_teach_info info_frame">
            <ul>
                <li>Timetables have been generated for all {{total_pupils}} pupils</li>
            </ul>
            <a href="{% url 'pupils_navigator' %}" class="view_link_button white_link">
                View pupil timetables
            </a>
            <hr class="horizontal_break">
            <a href="" class="email_link_button white_link">
                Email timetables to pupils
            </a>
        </div>

        <div id="teacher_info" class="pup_teach_info info_frame">
            <ul>
                <li>Timetables have been generated for all {{total_teachers}} teachers</li>
            </ul>
            <a href="{% url 'teachers_navigator' %}" class="view_link_button white_link">
                View teacher timetables
            </a>
            <hr class="horizontal_break">
            <a href="" class="email_link_button white_link">
                Email timetables to teachers
            </a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

</body>
</html>
